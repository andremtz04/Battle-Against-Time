[gd_scene load_steps=30 format=3 uid="uid://bga6mkh5j441c"]

[ext_resource type="Script" path="res://Scripts/Main System/ui.gd" id="2_bppfq"]
[ext_resource type="Texture2D" uid="uid://blwnkhikcechp" path="res://icon.svg" id="2_hl03d"]
[ext_resource type="Script" path="res://Scripts/Main System/main_camera.gd" id="3_a5gf1"]
[ext_resource type="Texture2D" uid="uid://b0l7py1rdquvu" path="res://Textures/GUI/MuteButton.png" id="3_rg7c8"]
[ext_resource type="Texture2D" uid="uid://ckjcyj6yl81cc" path="res://Textures/Towers/Priestess.png" id="3_ymju5"]
[ext_resource type="Texture2D" uid="uid://rrhlhmcbsrqv" path="res://Textures/Temp/Character/Male adventurer/PNG/Poses/character_maleAdventurer_attack0.png" id="4_jguus"]
[ext_resource type="AudioStream" uid="uid://dwiowodyq12rj" path="res://Audio/Effects/BadAction.mp3" id="5_5u5l7"]
[ext_resource type="Texture2D" uid="uid://def5v5wknj0g1" path="res://Textures/Towers/wizarding.png" id="5_a3mt8"]
[ext_resource type="AudioStream" uid="uid://bebyl24s5s1gd" path="res://Audio/Music/CheekyHorn.mp3" id="5_nu03c"]
[ext_resource type="Script" path="res://Scripts/Main System/enemy_wave.gd" id="6_0jpq0"]
[ext_resource type="AudioStream" uid="uid://d2stov0k3ufj1" path="res://Audio/Music/TromboneSadge.mp3" id="6_5kee7"]
[ext_resource type="Texture2D" uid="uid://b0my7388sgq8b" path="res://Textures/Temp/Character/Female person/PNG/Poses/character_femalePerson_attack0.png" id="6_qs5vs"]
[ext_resource type="Texture2D" uid="uid://bue8fdsvcl46d" path="res://Textures/Temp/Character/Male person/PNG/Poses/character_malePerson_attack0.png" id="7_1yfya"]
[ext_resource type="Texture2D" uid="uid://bhpaf7pegoclk" path="res://Textures/Temp/Character/Female adventurer/PNG/Poses/character_femaleAdventurer_attack0.png" id="8_1y1mp"]
[ext_resource type="AudioStream" uid="uid://xa1rxri2spvr" path="res://Audio/Music/Kick.mp3" id="8_exuxu"]
[ext_resource type="AudioStream" uid="uid://ch5a1flc2esql" path="res://Audio/Music/AtariBass.mp3" id="9_qn2xa"]
[ext_resource type="AudioStream" uid="uid://bs7xjlov6cm88" path="res://Audio/Music/MusicBox.mp3" id="10_qdetx"]
[ext_resource type="Shader" path="res://Shaders/vignette.gdshader" id="17_hwd1k"]
[ext_resource type="Texture2D" uid="uid://bx01w75h7o3j" path="res://Textures/Map/oak_veneer_01_diff_1k.jpg" id="18_sky8f"]
[ext_resource type="MeshLibrary" uid="uid://cy8f7gd0l6jjl" path="res://Meshes/Dungeon.tres" id="22_mjaxf"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qimma"]
shader = ExtResource("17_hwd1k")
shader_parameter/outerRadius = 1.485
shader_parameter/MainAlpha = 1.0
shader_parameter/vignette_color = null

[sub_resource type="AtlasTexture" id="AtlasTexture_k1n14"]
atlas = ExtResource("3_ymju5")
region = Rect2(14, 11, 102, 119)

[sub_resource type="AtlasTexture" id="AtlasTexture_o4sn0"]
atlas = ExtResource("5_a3mt8")
region = Rect2(7.5, 11, 100, 120)

[sub_resource type="Environment" id="Environment_yeaxu"]

[sub_resource type="Curve3D" id="Curve3D_i2jhb"]

[sub_resource type="BoxShape3D" id="BoxShape3D_evvkq"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5r03p"]
albedo_texture = ExtResource("18_sky8f")

[sub_resource type="PlaneMesh" id="PlaneMesh_yxa4q"]
material = SubResource("StandardMaterial3D_5r03p")
size = Vector2(40, 40)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_iqtvg"]
data = PackedVector3Array(20, 0, 20, -20, 0, 20, 20, 0, -20, -20, 0, 20, -20, 0, -20, 20, 0, -20)

[node name="Map" type="Node3D"]

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("2_bppfq")

[node name="ColorRect" type="ColorRect" parent="UI"]
z_index = -3
material = SubResource("ShaderMaterial_qimma")
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 1112.0
offset_bottom = 608.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4

[node name="Money" type="RichTextLabel" parent="UI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="Health" type="RichTextLabel" parent="UI"]
layout_mode = 0
offset_left = 1.0
offset_top = 36.0
offset_right = 41.0
offset_bottom = 76.0

[node name="GridContainer" type="GridContainer" parent="UI"]
layout_mode = 0
offset_left = 878.0
offset_top = 13.0
offset_right = 1138.0
offset_bottom = 497.0
columns = 2

[node name="SpawnTower1" type="TextureButton" parent="UI/GridContainer"]
layout_mode = 2
texture_normal = SubResource("AtlasTexture_k1n14")

[node name="SpawnTower2" type="TextureButton" parent="UI/GridContainer"]
layout_mode = 2
texture_normal = ExtResource("4_jguus")

[node name="SpawnTower3" type="TextureButton" parent="UI/GridContainer"]
layout_mode = 2
texture_normal = SubResource("AtlasTexture_o4sn0")

[node name="SpawnTower4" type="TextureButton" parent="UI/GridContainer"]
layout_mode = 2
texture_normal = ExtResource("7_1yfya")

[node name="SpawnTower5" type="TextureButton" parent="UI/GridContainer"]
layout_mode = 2
texture_normal = ExtResource("6_qs5vs")

[node name="SpawnTower6" type="TextureButton" parent="UI/GridContainer"]
layout_mode = 2
texture_normal = ExtResource("8_1y1mp")

[node name="Play Button" type="TextureButton" parent="UI"]
layout_mode = 0
offset_left = 1004.0
offset_top = 509.0
offset_right = 1132.0
offset_bottom = 637.0
texture_normal = ExtResource("2_hl03d")

[node name="RichTextLabel" type="RichTextLabel" parent="UI"]
layout_mode = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="EnemyTest2" type="Button" parent="UI"]
layout_mode = 0
offset_left = 1062.0
offset_top = 434.0
offset_right = 1123.0
offset_bottom = 465.0
text = "Enemy"

[node name="MuteButton" type="TextureButton" parent="UI"]
layout_mode = 0
offset_left = 29.0
offset_top = 523.0
offset_right = 855.0
offset_bottom = 976.0
scale = Vector2(0.209464, 0.247923)
texture_normal = ExtResource("3_rg7c8")

[node name="Lighting Stuff" type="Node3D" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Lighting Stuff"]
environment = SubResource("Environment_yeaxu")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="Lighting Stuff"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 25, 0)
shadow_bias = 4.605

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.422618, 0.906308, 0, -0.906308, 0.422618, 9, 9.5, 9)
fov = 65.0
script = ExtResource("3_a5gf1")

[node name="Audio" type="Node3D" parent="Camera3D"]
transform = Transform3D(1, 0, 0, 0, 0.258819, -0.965926, 0, 0.965926, 0.258819, 0, 0, 0)

[node name="BadAction" type="AudioStreamPlayer3D" parent="Camera3D/Audio"]
stream = ExtResource("5_5u5l7")
volume_db = -4.103

[node name="WhimsyPlayer" type="AudioStreamPlayer3D" parent="Camera3D/Audio"]
stream = ExtResource("5_nu03c")
parameters/looping = true

[node name="WompPlayer" type="AudioStreamPlayer3D" parent="Camera3D/Audio"]
stream = ExtResource("6_5kee7")
parameters/looping = true

[node name="KickPlayer" type="AudioStreamPlayer3D" parent="Camera3D/Audio"]
stream = ExtResource("8_exuxu")
parameters/looping = true

[node name="BassPlayer" type="AudioStreamPlayer3D" parent="Camera3D/Audio"]
stream = ExtResource("9_qn2xa")
parameters/looping = true

[node name="HiTunePlayer" type="AudioStreamPlayer3D" parent="Camera3D/Audio"]
stream = ExtResource("10_qdetx")
parameters/looping = true

[node name="Path1" type="Path3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.5, 1, 0.5)
curve = SubResource("Curve3D_i2jhb")
script = ExtResource("6_0jpq0")

[node name="Timer" type="Timer" parent="Path1"]

[node name="End Area" type="Area3D" parent="."]
monitorable = false

[node name="CollisionShape3D" type="CollisionShape3D" parent="End Area"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 14.5, 1.5, 8.5)
shape = SubResource("BoxShape3D_evvkq")

[node name="Background Stuff" type="Node3D" parent="."]

[node name="Main Map" type="GridMap" parent="Background Stuff"]
mesh_library = ExtResource("22_mjaxf")
cell_size = Vector3(1, 1, 1)
collision_layer = 2
collision_mask = 2
collision_priority = 2.0
data = {
"cells": PackedInt32Array(0, 0, 1441792, 1, 0, 1441792, 2, 0, 1441792, 3, 0, 1441792, 4, 0, 1441792, 5, 0, 1441792, 6, 0, 1441792, 7, 0, 1441792, 8, 0, 1441792, 9, 0, 1441792, 10, 0, 1441792, 11, 0, 1441792, 12, 0, 1441792, 13, 0, 1441792, 14, 0, 1441792, 0, 1, 1441792, 0, 2, 1441792, 0, 3, 1441792, 0, 4, 1441792, 0, 5, 1441792, 0, 6, 1441792, 0, 7, 1441792, 1, 1, 1441792, 2, 1, 1441792, 3, 1, 1441792, 4, 1, 1441792, 5, 1, 1441792, 6, 1, 1441792, 7, 1, 1441792, 8, 1, 1441792, 9, 1, 1441792, 10, 1, 1441792, 11, 1, 1441792, 12, 1, 1441792, 13, 1, 1441792, 14, 1, 1441792, 14, 2, 1441792, 14, 3, 1048579, 13, 7, 1441792, 12, 7, 1441792, 5, 6, 1441792, 4, 6, 1441792, 3, 6, 1441792, 2, 6, 1441792, 1, 6, 1441792, 1, 7, 1441792, 2, 7, 1441792, 3, 7, 1441792, 4, 7, 1441792, 8, 6, 1441792, 9, 6, 1441792, 10, 6, 1441792, 11, 6, 1441792, 12, 6, 1441792, 13, 6, 1441792, 9, 5, 1441792, 8, 5, 1441792, 7, 5, 1441792, 6, 5, 1441792, 5, 5, 1441792, 2, 5, 1441792, 1, 5, 1441792, 3, 5, 1441792, 4, 5, 1441792, 6, 6, 1441792, 7, 6, 1441792, 10, 5, 1441792, 11, 5, 1441792, 12, 5, 1441792, 13, 5, 1441792, 13, 3, 1441792, 12, 3, 1441792, 12, 2, 1441792, 11, 2, 1441792, 10, 2, 1441792, 9, 2, 1441792, 8, 2, 1441792, 7, 2, 1441792, 6, 2, 1441792, 5, 2, 1441792, 5, 3, 1441792, 4, 3, 1441792, 3, 3, 1441792, 2, 3, 1441792, 2, 2, 1441792, 1, 2, 1441792, 1, 3, 1441792, 6, 3, 1441792, 6, 4, 1441792, 7, 4, 1441792, 8, 3, 1441792, 9, 3, 1441792, 10, 3, 1441792, 11, 3, 1441792, 13, 2, 1441792, 13, 4, 1441792, 12, 4, 1441792, 11, 4, 1441792, 10, 4, 1441792, 9, 4, 1441792, 8, 4, 1441792, 7, 3, 1441792, 5, 4, 1441792, 4, 4, 1441792, 3, 4, 1441792, 2, 4, 1441792, 1, 4, 1441792, 3, 2, 1441792, 4, 2, 1441792, 14, 8, 1441792, 13, 8, 1441792, 12, 8, 1441792, 11, 8, 1441792, 10, 8, 1441792, 9, 8, 1441792, 8, 8, 1441792, 7, 8, 1441792, 6, 8, 1441792, 5, 8, 1441792, 4, 8, 1441792, 3, 8, 1441792, 2, 8, 1441792, 1, 8, 1441792, 0, 8, 1441792, 5, 7, 1441792, 6, 7, 1441792, 7, 7, 1441792, 8, 7, 1441792, 9, 7, 1441792, 10, 7, 1441792, 11, 7, 1441792, 65540, 0, 1441793, 65541, 0, 1441793, 65542, 0, 1441793, 65543, 0, 1441793, 65544, 0, 1441793, 65545, 0, 1441793, 65546, 0, 1441793, 65547, 0, 1441793, 65548, 0, 1441793, 65549, 0, 1441793, 65550, 0, 1441793, 65536, 8, 1441793, 65537, 8, 1441793, 65538, 8, 1441793, 65539, 8, 1441793, 65540, 8, 1441793, 65541, 8, 1441793, 65542, 8, 1441793, 65543, 8, 1441793, 65544, 8, 1441793, 65545, 8, 1441793, 65546, 8, 1441793, 65547, 8, 1441793, 65548, 8, 1441793, 65550, 1, 1441793, 65550, 2, 1441793, 65546, 1, 1441793, 65546, 5, 1441793, 65546, 7, 1441793, 65546, 6, 1441793, 14, 4, 1048579, 14, 5, 1048579, 14, 6, 1048579, 14, 7, 1048579)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Background Stuff"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.7203, 0, 6.60258)
mesh = SubResource("PlaneMesh_yxa4q")
skeleton = NodePath("../Main Map")

[node name="StaticBody3D" type="StaticBody3D" parent="Background Stuff/MeshInstance3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Background Stuff/MeshInstance3D/StaticBody3D"]
shape = SubResource("ConcavePolygonShape3D_iqtvg")

[connection signal="start_round" from="UI" to="Path1" method="_on_ui_start_round"]
[connection signal="button_down" from="UI/GridContainer/SpawnTower1" to="UI" method="_on_spawn_tower_1_button_down"]
[connection signal="button_down" from="UI/GridContainer/SpawnTower2" to="UI" method="_on_spawn_tower_2_button_down"]
[connection signal="button_down" from="UI/GridContainer/SpawnTower3" to="UI" method="_on_spawn_tower_3_button_down"]
[connection signal="button_down" from="UI/GridContainer/SpawnTower4" to="UI" method="_on_spawn_tower_4_button_down"]
[connection signal="button_down" from="UI/GridContainer/SpawnTower5" to="UI" method="_on_spawn_tower_5_button_down"]
[connection signal="button_down" from="UI/GridContainer/SpawnTower6" to="UI" method="_on_spawn_tower_6_button_down"]
[connection signal="button_down" from="UI/Play Button" to="UI" method="_on_play_button_button_down"]
[connection signal="button_down" from="UI/EnemyTest2" to="UI" method="_on_button_button_down"]
[connection signal="pressed" from="UI/MuteButton" to="Camera3D" method="_on_mute_button_pressed"]
[connection signal="placedTower" from="Camera3D" to="UI" method="_on_camera_3d_placed_tower"]
[connection signal="timeout" from="Path1/Timer" to="Path1" method="_on_timer_timeout"]
[connection signal="area_entered" from="End Area" to="Path1" method="_on_area_3d_area_entered"]
